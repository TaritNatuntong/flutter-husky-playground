#!/bin/sh
# ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏ô‡∏ï‡πå Husky (‡∏´‡πâ‡∏≤‡∏°‡∏•‡∏ö)
. "$(dirname "$0")/_/husky.sh"

# 1. ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏ß‡∏¢‡πÜ ‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß
echo "------------------------------------------------"
echo "üê∂ Husky is watching you..."
echo "------------------------------------------------"

# 2. ‡∏à‡∏±‡∏î‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î (Format) ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
echo "‚ú® Running Dart Format..."
dart format .

# 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Syntax (Analyze) - ‡∏ñ‡πâ‡∏≤‡∏û‡∏±‡∏á ‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î Commit
echo "üîç Running Flutter Analyze..."
flutter analyze
if [ $? -ne 0 ]; then
  echo "‚ùå Error: Code analysis failed! Please fix issues."
  exit 1
fi

# 4. (‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å) ‡∏£‡∏±‡∏ô Unit Test - ‡∏ñ‡πâ‡∏≤‡∏£‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î Commit
# echo "üß™ Running Tests..."
# flutter test
# if [ $? -ne 0 ]; then
#   echo "‚ùå Error: Tests failed!"
#   exit 1
# fi

echo "‚úÖ All checks passed! Committing now..."
echo "------------------------------------------------"